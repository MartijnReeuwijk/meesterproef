import{thumbnailsEventListener}from"../index.js";import{addPreviewListeners}from"./preview.js";import{data}from"./data.js";import{render}from"./render.js";let timerVar;function fade(e){setTimeout(()=>{const e=document.getElementsByClassName("mainpageImage");Array.from(e).forEach(e=>{e.classList.add("fadeOut")})},e)}function start(e){fade(e-500),timerVar=setInterval(async()=>{const t=window.location.href,a=t.split("/"),r=a[a.length-1].split("-"),n=r[r.length-1];if(fade(e-500),t.includes("/search"))try{const e=await data.related(n);await render.newImages(e),thumbnailsEventListener(),addPreviewListeners()}catch(e){console.error(e)}else try{const t=await data.random();await render.newImages(t),fade(e-500),thumbnailsEventListener(),addPreviewListeners()}catch(e){console.error(e)}},e)}function related(e,t){timerVar=setInterval(async()=>{let a=[];for(let t=0;t<9;t++)a.push(e[Math.floor(Math.random()*e.length)]);await render.newImages(a),fade(t-500),thumbnailsEventListener(),addPreviewListeners()},t)}function stop(){clearInterval(timerVar),console.log("Stopped the timer")}function changeInterval(e){stop(),start(e)}export const timer={start:start,stop:stop,changeInterval:changeInterval,related:related};